{% extends 'pages/navl5.html' %}
    {% block siripye %}
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--  <head>-->

      <style>

      table{
        margin: 0 auto;
        width: 100%;
        clear: both;
        border-collapse: collapse;
        table-layout: fixed; // ***********add this
        word-wrap:break-word; // ***********and this
            }


          td { font-size: 15px; }
          tr { font-size: 16px; }

          table.dataTable thead th.ui-state-default {
          background: #007E77;
          color: white;
            }
          table.dataTable tfoot th.ui-state-default {
          background: #007E77;
          color: white;
            }


          table.dataTable td:nth-child(1) {
            font-weight: bold;
            }

}
      </style>

      <style>
      .btn-xs{
        margin:0 0px 2px 0;
        //width: 51px;
        display: inline-block;
      }

      </style>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>RST Dashboard</title>
    <!-- base:css -->
    <link rel="stylesheet" href="../static/modules/rst_vendors/mdi/css/materialdesignicons.min.css">
<!--    <link rel="stylesheet" href="../rst_vendors/base/vendor.bundle.base.css">-->
    <!-- endinject -->
    <!-- plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="../static/css/rst_css/style.css">
    <!-- endinject -->
    <link rel="shortcut icon" href="../static/img/rst_img/favicon.png"/>

      <!-- plugin Datatable css for this page -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/dataTables.jqueryui.min.css">



<!--      Google Font  -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300&display=swap" rel="stylesheet">
      <style>
body {
  font-family: "Poppins", sans-serif;
  //font-size: 48px;
}
</style>

<!--  </head>-->
<!--  <body>-->
    {% endblock %}
{% block content %}
    <div class="container-scroller">

    <!-- partial:partials/_horizontal-navbar.html -->

    <!-- partial -->

		<div class="container-fluid page-body-wrapper">
			<div class="main-panel">
				<div class="content-wrapper">

					<div class="row mt-0">

                        <div class="col-lg-12 grid-margin stretch-card">
                            <div class="card shadow">
                                <div class="card-header bg-light text-black px-2 p-1 d-flex justify-content-between align-items-center">
                                    <h4 class="mt-2 fw-bold">Corrective Maintenance - Train Status Line 5</h4>
                                    <h6 class="mt-2 small"><kbd class="mt-1 small">Updated On: {{udate[0]}}</kbd></h6>
                                    <!--                                    <h6 class="mt-1 small">Download <i class="fas fa-file-excel"></i></h6>-->
                                    <!--                                    <h6 class="mt-1 small"><kbd class="mt-1 small">Download <i class="fas fa-file-excel"></i></kbd></h6>-->
                                </div>
                            </div>
                        </div>

                        <style>
                        .top-buffer { margin-top:-28px; }
                        </style>


                        <div class="col-lg-12 top-buffer grid-margin stretch-card">
							<div class="card shadow card-gradlightblue1">
								<div class="card-body">
<!--									<div class="row">-->
<!--										<div class="col-lg-12">-->
                                    <div class="d-flex align-items-center justify-content-between">
											<h4 class="card-title">CM Status of Train</h4>
                                    </div>
                                            <div class="content mb-2" style="position:relative; display:flex; flex-wrap:wrap;">
                                                <button id="501" type="button" class="btn btn-xs {{btstatus[24]}} btn-rounded">TS 501</button>
                                                <button id="502" type="button" class="btn btn-xs {{btstatus[25]}} btn-rounded">TS 502</button>
                                                <button id="503" type="button" class="btn btn-xs {{btstatus[26]}} btn-rounded">TS 503</button>
                                                <button id="504" type="button" class="btn btn-xs {{btstatus[27]}} btn-rounded">TS 504</button>
                                                <button id="505" type="button" class="btn btn-xs {{btstatus[28]}} btn-rounded">TS 505</button>
                                                <button id="506" type="button" class="btn btn-xs {{btstatus[29]}} btn-rounded">TS 506</button>
                                                <button id="507" type="button" class="btn btn-xs {{btstatus[30]}} btn-rounded">TS 507</button>
                                                <button id="508" type="button" class="btn btn-xs {{btstatus[31]}} btn-rounded">TS 508</button>
                                                <button id="509" type="button" class="btn btn-xs {{btstatus[32]}} btn-rounded">TS 509</button>
                                                <button id="510" type="button" class="btn btn-xs {{btstatus[33]}} btn-rounded">TS 510</button>
                                                <button id="511" type="button" class="btn btn-xs {{btstatus[34]}} btn-rounded">TS 511</button>
                                                <button id="512" type="button" class="btn btn-xs {{btstatus[35]}} btn-rounded">TS 512</button>
                                                <button id="513" type="button" class="btn btn-xs {{btstatus[36]}} btn-rounded">TS 513</button>
                                                <button id="514" type="button" class="btn btn-xs {{btstatus[37]}} btn-rounded">TS 514</button>
                                                <button id="515" type="button" class="btn btn-xs {{btstatus[38]}} btn-rounded">TS 515</button>
                                                <button id="516" type="button" class="btn btn-xs {{btstatus[39]}} btn-rounded">TS 516</button>
                                                <button id="517" type="button" class="btn btn-xs {{btstatus[40]}} btn-rounded">TS 517</button>
                                                <button id="518" type="button" class="btn btn-xs {{btstatus[41]}} btn-rounded">TS 518</button>
                                                <button id="519" type="button" class="btn btn-xs {{btstatus[42]}} btn-rounded">TS 519</button>
                                            </div>

								</div>
							</div>
						</div>
					</div>

                    <div class="row mt-0">

						<div class="col-sm-12 grid-margin grid-margin-md-0 stretch-card">
							<div class="card shadow">
								<div class="card-body">
                                    <h4 class="card-title">Corrective Maintenance To Be Done</h4>
                                    <table id="datatable" class="display" style="width:100%">
        <thead>
            <tr>
                <th>Open Date</th>
                <th>Doc. Ref.</th>
                <th>CM Ref</th>
                <th>Train ID</th>
                <th>Description</th>
                <th>Impact</th>
                <th>Progress</th>
            </tr>

        </thead>
        <tbody>
        {%for i in range(0, lenlist)%}
            <tr>
<!--                  <td><a href="/getfile/${data402[i][2]}.pdf" target="_blank">${data402[i][2]}</td></a>-->
                <td>{{cmtslist[i][0]}}</td>
                <td>{{cmtslist[i][1]}}</td>


                {% if cmtslist[i][1]== "NCR" %}
                 <td><a href="/getfile/{{cmtslist[i][2]}}.pdf" target="_blank"> {{cmtslist[i][2]}} </a></td>
                {% else %}
                 <td>{{cmtslist[i][2]}}</td>
                {% endif %}

<!--                <td><a href="/getfile/{{cmtslist[i][2]}}.pdf" target="_blank"> {{cmtslist[i][2]}} </a></td>-->
                <td>{{cmtslist[i][3]}}</td>
                <td>{{cmtslist[i][4]}}</td>

                {% if cmtslist[i][5]=="Medium" %}
                <td> <span class="badge badge-warning"> {{cmtslist[i][5]}} </span></td>
                {% elif cmtslist[i][5]=="High" %}
                <td> <span class="badge badge-danger"> {{cmtslist[i][5]}} </span></td>
                {% else %}
                <td> <span class="badge badge-success"> {{cmtslist[i][5]}} </span></td>
                {% endif %}

                <td>{{cmtslist[i][6]}}</td>
            </tr>
        {%endfor%}
        </tbody>
        <tfoot>
             <tr>
                <th>Open Date</th>
                <th>Doc. Ref.</th>
                <th>CM Ref</th>
                <th>Train ID</th>
                <th>Description</th>
                <th>Impact</th>
                <th>Progress</th>
            </tr>
        </tfoot>
    </table>
                                </div>
							</div>
						</div>
					</div>

				</div>
				<!-- content-wrapper ends -->
				<!-- partial:partials/_footer.html -->
				<footer class="footer">
          <div class="footer-wrap">
            <div class="d-sm-flex justify-content-center justify-content-sm-between">
              <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">Copyright Â© Alstom</span>
              <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center"> Developed by RAO Kamran (Riyadh Metro Project) </span>
            </div>
          </div>
        </footer>
				<!-- partial -->
			</div>
			<!-- main-panel ends -->
		</div>
		<!-- page-body-wrapper ends -->
    </div>
		<!-- container-scroller -->


        <!-- base:js -->
    <script src="../static/modules/rst_vendors/base/vendor.bundle.base.js"></script>
    <!-- endinject -->

    <!-- inject:js -->
    <script src="../static/modules/rst_vendors/js/template.js"></script>
    <!-- endinject -->


        <!-- plugin js for this page -->
        <script src="../static/modules/rst_vendors/chart.js/Chart.min.js"></script>
        <script src="../static/modules/rst_vendors/progressbar.js/progressbar.min.js"></script>
		<script src="../static/modules/rst_vendors/chartjs-plugin-datalabels/chartjs-plugin-datalabels.js"></script>
        <script src="../static/modules/rst_vendors/deferred/chartjs-plugin-deferred.min.js"></script>

        <!-- Datatable js for this page -->
        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
        <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.11.3/js/dataTables.jqueryui.min.js"></script>

    <script>

      (function($) {
	'use strict';
	$(function() {
	var lbls_sub= {{lblsub|safe}};
	var lbls_res= {{lblres|safe}};

		var NCRSubData = {
			//labels: ["Battery", "Brakes", "CVS", "Doors", "E Wiring", "HORN", "HVAC", "PACIS", "Traction", "Windows"],
			labels: lbls_sub,
			datasets: [{
				label: 'NCR',
				//data: [32, 13, 11, 25, 10, 16, 4, 2, 1, 3, 8, 1, 3],
				data: [{% for i in valsub %} {{ i }}, {% endfor %}],
				//backgroundColor: ['#3BB2D7','#54BCDC','#6CC5E1','#84CFE6','#59BDDC','#75C8E2','#91D3E8', '#ACDEED',
				//'#C8E9F3', '#E3F4F9', '#E3F4F9', '#E3F4F9'],
				backgroundColor: ['#E2FF08','#E6FF27','#E9FF46','#EDFF65','#F0FF84','#F4FFA2','#F8FFC1', '#F8FFC1',
				'#F8FFC1', '#F8FFC1', '#F8FFC1', '#F8FFC1'],
				//borderColor: ['#92B8B8','#89B9BA','#81B9BA','#7AB9BA','#6CB8B9','#60B6B8','#4AB4B5','#32B2B4'],

				borderWidth: 2,
				fill: false
			}],
		};
		var NCRSubOptions = {
		      	responive: true,
				maintainAspectRatio: true,
		    animation: {
                duration : 3000,
            },

			scales: {
				xAxes: [{
					position: 'bottom',
					display: true,
					gridLines: {
							display: false,
							drawBorder: true,
					},
					ticks: {
							display: true ,//this will remove only the label
							fontSize: 11,
							beginAtZero: true
					}
				}],
				yAxes: [{
					display: false,
					gridLines: {
						drawBorder: true,
						display: false,
					},
					ticks: {
					    fontSize: 10,
						beginAtZero: true
					},
				}]
			},
			legend: {
				display: false
			},
			tooltips: {
				show: false,
				backgroundColor: 'rgba(119,119,119,0.9)',
			},
			plugins: {
			datalabels: {
					display: true,
					align: 'end',
					color: 'black',
				}
			}

		};
		if ($("#NCRSubBar").length) {
			var barChartCanvas = $("#NCRSubBar").get(0).getContext("2d");
			barChartCanvas.canvas.width = 1100;
			barChartCanvas.canvas.height = 330;

			// This will get the first returned node in the jQuery collection.
			var barChart = new Chart(barChartCanvas, {
				type: 'bar',
				data: NCRSubData,
				options: NCRSubOptions,

			});
		}



		var ncrPieResData = {

			datasets: [{
				data: [{% for i in valres %} {{ i }}, {% endfor %}],
				//data: [20, 15, 20, 35, 10],
				backgroundColor: ['#ee5b5b','#fcd53b','#0bdbb8','#464dee','#0ad7f7','#990033','#009966','#FF99FF'],
				borderColor: ['#ee5b5b','#fcd53b','#0bdbb8','#464dee','#0ad7f7','#990033','#009966','#FF99FF'],
			}],
			// These labels appear in the legend and in the tooltips when hovering different arcs
			//labels: ["Alstom", "CRL", "FT", "Hoppecke", "KN", "STE-VBN"],
			labels: lbls_res,

		};
		var ncrPieResOptions = {
			responsive: true,
			cutoutPercentage: 11,
			legend: {
					display: true,
					position: 'left',
			    "labels": {
                    "fontSize": 10,
                	usePointStyle: true,
					boxWidth: 4,
                        }
			},
			animation: {
					animateScale: true,
					animateRotate: true
			},
			plugins: {

				datalabels: {
					 display: true,
					 color: "white",
					 align: 'center',
					 anchor: 'center'
				}
			}

		};
		if ($("#ncrPieRes").length) {
			var pieChartCanvas = $("#ncrPieRes").get(0).getContext("2d");
			var pieChart = new Chart(pieChartCanvas, {
				type: 'doughnut',
				data: ncrPieResData,
				options: ncrPieResOptions
			});
		}



	});
})(jQuery);

  </script>

    <script>

      (function($) {
	'use strict';
	$(function() {
        var lbl_status= {{lblstatus|safe}};
		var ncrPieStatusData = {
			datasets: [{
				//data: [3, 59, 37],
				data: [{% for i in valstatus %} {{ i }}, {% endfor %}],
				backgroundColor: ['#ee5b5b','#0bdbb8','#fcd53b','#4AC7FF','#464dee','#0ad7f7','#990033','#009966','#FF99FF', '#78697C'],
				borderColor: ['#ee5b5b','#0bdbb8','#fcd53b','#4AC7FF','#464dee','#0ad7f7','#990033','#009966','#FF99FF', '#78697C'],
			}],
			// These labels appear in the legend and in the tooltips when hovering different arcs
			//labels: ["Corrective Action Defined", "NCR Closed", "NCR Opened"],
			labels: lbl_status,

		};
		var ncrPieStatusOptions = {
			responsive: true,
			cutoutPercentage: 10,
			legend: {
					display: true,
					position: 'left',
			    "labels": {
                    "fontSize": 11,
                	usePointStyle: true,
					boxWidth: 4,
                        }
			},
			animation: {
					animateScale: true,
					animateRotate: true
			},
			plugins: {

				datalabels: {
					 display: true,
					 color: "white",
					 align: 'center',
					 anchor: 'center'
				}
			}

		};
		if ($("#ncrPieStatus").length) {
			var pieChartCanvas = $("#ncrPieStatus").get(0).getContext("2d");
			var pieChart = new Chart(pieChartCanvas, {
				type: 'doughnut',
				data: ncrPieStatusData,
				options: ncrPieStatusOptions
			});
		}



	});

})(jQuery);

  </script>

    <script>
    var dataTables = $('#datatable').DataTable({"info": false,"lengthChange": false, dom: 'lrt',
    "order": [[ 0, 'desc' ]],

    "columnDefs": [
      { "width": "30px", "targets": 0 },
      { "width": "30px", "targets": 1 },
      { "width": "30px", "targets": 2 },
      { "width": "30px", "targets": 3 },
      { "width": "80px", "targets": 4 },
      { "width": "25px", "targets": 5 },
      { "width": "110px", "targets": 6 },




       {"className": "dt-center", "targets": [0, 1, 2, 3, 5]},
      ],

      "aLengthMenu": [[10, 25, 50, 75, -1], [10, 25, 50, 75, "All"]],
        "iDisplayLength": -1,

});

$('#401').on('click', function () {
    dataTables.columns(3).search("401").draw();
});

$('#402').on('click', function () {
    dataTables.columns(3).search("402" ).draw();
});

$('#403').on('click', function () {
    dataTables.columns(3).search("403" ).draw();
});
$('#404').on('click', function () {
    dataTables.columns(3).search("404" ).draw();
});
$('#405').on('click', function () {
    dataTables.columns(3).search("405" ).draw();
});
$('#406').on('click', function () {
    dataTables.columns(3).search("406" ).draw();
});
$('#407').on('click', function () {
    dataTables.columns(3).search("407" ).draw();
});
$('#408').on('click', function () {
    dataTables.columns(3).search("408" ).draw();
});
$('#409').on('click', function () {
    dataTables.columns(3).search("409" ).draw();
});
$('#410').on('click', function () {
    dataTables.columns(3).search("410" ).draw();
});
$('#411').on('click', function () {
    dataTables.columns(3).search("411" ).draw();
});
$('#412').on('click', function () {
    dataTables.columns(3).search("412" ).draw();
});
$('#413').on('click', function () {
    dataTables.columns(3).search("413" ).draw();
});
$('#414').on('click', function () {
    dataTables.columns(3).search("414" ).draw();
});
$('#415').on('click', function () {
    dataTables.columns(3).search("415" ).draw();
});
$('#416').on('click', function () {
    dataTables.columns(3).search("416" ).draw();
});
$('#417').on('click', function () {
    dataTables.columns(3).search("417" ).draw();
});
$('#418').on('click', function () {
    dataTables.columns(3).search("418" ).draw();
});
$('#419').on('click', function () {
    dataTables.columns(3).search("419" ).draw();
});
$('#420').on('click', function () {
    dataTables.columns(3).search("420" ).draw();
});$('#421').on('click', function () {
    dataTables.columns(3).search("421" ).draw();
});$('#422').on('click', function () {
    dataTables.columns(3).search("422" ).draw();
});$('#423').on('click', function () {
    dataTables.columns(3).search("423" ).draw();
});$('#424').on('click', function () {
    dataTables.columns(3).search("424" ).draw();
});
</script>

    <script>


$('#501').on('click', function () {
    dataTables.columns(3).search("501" ).draw();
});

$('#502').on('click', function () {
    dataTables.columns(3).search("502" ).draw();
});

$('#503').on('click', function () {
    dataTables.columns(3).search("503" ).draw();
});
$('#504').on('click', function () {
    dataTables.columns(3).search("504" ).draw();
});
$('#505').on('click', function () {
    dataTables.columns(3).search("505" ).draw();
});
$('#506').on('click', function () {
    dataTables.columns(3).search("506" ).draw();
});
$('#507').on('click', function () {
    dataTables.columns(3).search("507" ).draw();
});
$('#508').on('click', function () {
    dataTables.columns(3).search("508" ).draw();
});
$('#509').on('click', function () {
    dataTables.columns(3).search("509" ).draw();
});
$('#510').on('click', function () {
    dataTables.columns(3).search("510" ).draw();
});
$('#511').on('click', function () {
    dataTables.columns(3).search("511" ).draw();
});
$('#512').on('click', function () {
    dataTables.columns(3).search("512" ).draw();
});
$('#513').on('click', function () {
    dataTables.columns(3).search("513" ).draw();
});
$('#514').on('click', function () {
    dataTables.columns(3).search("514" ).draw();
});
$('#515').on('click', function () {
    dataTables.columns(3).search("515" ).draw();
});
$('#516').on('click', function () {
    dataTables.columns(3).search("516" ).draw();
});
$('#517').on('click', function () {
    dataTables.columns(3).search("517" ).draw();
});
$('#518').on('click', function () {
    dataTables.columns(3).search("518" ).draw();
});
$('#519').on('click', function () {
    dataTables.columns(3).search("519" ).draw();
});


    </script>

    <script>
        
$('#601').on('click', function () {
    dataTables.columns(3).search("601" ).draw();
});

$('#602').on('click', function () {
    dataTables.columns(3).search("602" ).draw();
});

$('#603').on('click', function () {
    dataTables.columns(3).search("603" ).draw();
});
$('#604').on('click', function () {
    dataTables.columns(3).search("604" ).draw();
});
$('#605').on('click', function () {
    dataTables.columns(3).search("605" ).draw();
});
$('#606').on('click', function () {
    dataTables.columns(3).search("606" ).draw();
});
$('#607').on('click', function () {
    dataTables.columns(3).search("607" ).draw();
});
$('#608').on('click', function () {
    dataTables.columns(3).search("608" ).draw();
});
$('#609').on('click', function () {
    dataTables.columns(3).search("609" ).draw();
});
$('#610').on('click', function () {
    dataTables.columns(3).search("610" ).draw();
});
$('#611').on('click', function () {
    dataTables.columns(3).search("611" ).draw();
});
$('#612').on('click', function () {
    dataTables.columns(3).search("612" ).draw();
});
$('#613').on('click', function () {
    dataTables.columns(3).search("613" ).draw();
});
$('#614').on('click', function () {
    dataTables.columns(3).search("614" ).draw();
});
$('#615').on('click', function () {
    dataTables.columns(3).search("615" ).draw();
});
$('#616').on('click', function () {
    dataTables.columns(3).search("616" ).draw();
});
$('#617').on('click', function () {
    dataTables.columns(3).search("617" ).draw();
});
$('#618').on('click', function () {
    dataTables.columns(3).search("618" ).draw();
});
$('#619').on('click', function () {
    dataTables.columns(3).search("619" ).draw();
});
$('#620').on('click', function () {
    dataTables.columns(3).search("620" ).draw();
});

$('#621').on('click', function () {
    dataTables.columns(3).search("621" ).draw();
});

$('#622').on('click', function () {
    dataTables.columns(3).search("622" ).draw();
});

$('#623').on('click', function () {
    dataTables.columns(3).search("623" ).draw();
});

$('#624').on('click', function () {
    dataTables.columns(3).search("624" ).draw();
});

$('#625').on('click', function () {
    dataTables.columns(3).search("625" ).draw();
});

$('#626').on('click', function () {
    dataTables.columns(3).search("626" ).draw();
});
    </script>

<!--  </body>-->
<!--</html>-->
{% endblock %}